# 🚀 TikTok分析面板部署指南

## 📋 **部署前准备**

### 1. 确保本地测试正常
```bash
python app.py
# 访问 http://127.0.0.1:5000 确认功能正常
```

### 2. 准备必要文件
确保项目包含以下文件：
- ✅ `requirements.txt` - Python依赖
- ✅ `Procfile` - 启动命令
- ✅ `runtime.txt` - Python版本
- ✅ `.gitignore` - 忽略文件列表

## 🚂 **Railway部署（推荐）**

### **第1步：注册Railway**
1. 访问 [railway.app](https://railway.app)
2. 使用GitHub账号注册/登录

### **第2步：上传代码到GitHub**
1. 在GitHub创建新仓库
2. 上传所有项目文件：
```bash
git init
git add .
git commit -m "Initial commit"
git remote add origin YOUR_GITHUB_REPO_URL
git push -u origin main
```

### **第3步：从GitHub部署**
1. 在Railway点击 **"New Project"**
2. 选择 **"Deploy from GitHub repo"**
3. 选择你的项目仓库
4. Railway会自动开始部署

### **第4步：获取公网域名**
1. 部署完成后，在Railway项目页面点击 **"Settings"**
2. 滚动到 **"Domains"** 部分
3. 点击 **"Generate Domain"**
4. 获得类似 `https://your-app-name.up.railway.app` 的域名

### **第5步：配置TikTok回调URL**
1. 复制Railway生成的域名
2. 在TikTok开发者后台，将回调URL设置为：
   ```
   https://your-app-name.up.railway.app/callback
   ```
3. 保存TikTok设置

### **第6步：测试部署**
1. 访问你的Railway域名
2. 在网页上配置TikTok API密钥
3. 测试授权流程

## 🎨 **Render部署（备选）**

### **第1步：注册Render**
1. 访问 [render.com](https://render.com)
2. 使用GitHub账号注册

### **第2步：创建Web Service**
1. 点击 **"New"** → **"Web Service"**
2. 连接GitHub仓库
3. 配置设置：
   - **Name**: `tiktok-analytics`
   - **Environment**: `Python 3`
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `python app.py`

### **第3步：获取域名并配置**
1. 部署完成后获得域名：`https://your-app.onrender.com`
2. 在TikTok后台配置回调URL：
   ```
   https://your-app.onrender.com/callback
   ```

## ⚙️ **环境变量配置（可选）**

如果要通过环境变量预设API密钥：

### Railway:
1. 进入项目设置 → **Variables**
2. 添加变量：
   - `TIKTOK_CLIENT_KEY`: 你的Client Key
   - `TIKTOK_CLIENT_SECRET`: 你的Client Secret

### Render:
1. 进入Service设置 → **Environment**
2. 添加相同的环境变量

## 🔧 **常见问题解决**

### **问题1：部署失败**
- 检查 `requirements.txt` 是否包含所有依赖
- 确认 `Procfile` 命令正确

### **问题2：回调URL错误**
- 确保TikTok后台URL与实际域名完全匹配
- 注意HTTPS vs HTTP

### **问题3：静态文件不加载**
- Railway和Render会自动处理静态文件
- 确认 `static/` 文件夹已上传

## 🎯 **部署后测试清单**

- [ ] 网站可以正常访问
- [ ] 样式和JavaScript正常加载
- [ ] 可以访问 `/config` 配置页面
- [ ] 可以输入并保存API密钥
- [ ] 授权按钮点击后跳转到TikTok
- [ ] 授权完成后能正确回调
- [ ] 数据能正常显示和更新

## 📞 **部署支持**

如果遇到问题：
1. 检查Railway/Render的部署日志
2. 确认所有文件都已正确上传
3. 验证TikTok后台配置

---

## 🎉 **恭喜！**

部署完成后，你就有了一个：
- ✅ 公网可访问的TikTok数据分析面板
- ✅ 支持真实TikTok API授权
- ✅ 实时数据更新和美观界面
- ✅ HTTPS安全连接

**你的应用现在可以正式使用TikTok官方API了！** 🚀 